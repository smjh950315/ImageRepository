<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title></title>
        <link rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="dynamical_query.js"></script>
        <style>
            table > thead > tr > th {
                width: 100px
            }
        </style>
    </head>
    <body>
        <br>
        <div>
            <table>
                <thead>
                    <tr>
                        <th class="text-center">連接條件</th>
                        <th class="text-center">搜尋條件</th>
                        <th class="text-center">比較方式</th>
                        <th class="text-center">關鍵字</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="text-center">
                        </td>
                        <td class="text-center">
                            <select class="dynamical-query-name-selection">
                            </select>
                        </td>
                        <td class="text-center">
                            <select class="dynamical-query-operator-selection">
                            </select>
                        </td>
                        <td>
                            <input class="dynamical-query-constant-input"
                                type="text" style="width:100%" />
                        </td>
                        <td>
                            <button class="btn"
                                onclick="DynamicalQuery.addRow(this)">+</button>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            <button class="btn"
                                onclick="DynamicalQuery.getQueryData(this)">查詢</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <script>
            var DynamicalQuery = {
                names: [
                    {value: 'name', text: '名稱'},
                    {value: 'tag', text: '標籤'},
                    {value: 'category', text: '類型'},
                ],
                getRowTemplates: function() {
                    return `<tr>
                        <td class="text-center">
                            <select class="dynamical-query-operand-selection">
                            </select>
                        </td>
                        <td class="text-center">
                            <select class="dynamical-query-name-selection">
                            </select>
                        </td>
                        <td class="text-center">
                            <select class="dynamical-query-operator-selection">
                            </select>
                        </td>
                        <td>
                            <input class="dynamical-query-constant-input" type="text" style="width:100%" />
                        </td>
                        <td>
                            <button class="btn dynamical-query-add-button">+</button>
                            <button class="btn dynamical-query-remove-button">-</button>
                        </td>
                    </tr>`;
                },
                removeRow: function(elem) {
                    DynamicalQueryConstant.RemoveRow(elem);
                },
                addRow: function(elem) {
                    DynamicalQueryConstant.AddRow(elem, DynamicalQuery.getRowTemplates(), DynamicalQuery.names);
                },
                getQueryData: function(elem) {
                    let data=DynamicalQueryConstant.GetDynamicQueryConditions(elem);
                }                
            };
        </script>
        <script>
            $(document).ready(function() {
                DynamicalQueryConstant.FillNameOptions(DynamicalQuery.names, $(".dynamical-query-name-selection")[0], 'text-center');
                DynamicalQueryConstant.FillOperatorOptions($(".dynamical-query-operator-selection")[0], 'text-center');
});
        </script>
    </body>
</html>